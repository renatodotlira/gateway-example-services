<html xmlns:th="http://www.w3.org/1999/xhtml">
<head>
</head>
<body>

	<div class="container">
    	<div class="starter-template">
        	<h1>Dynamically Generated Sentence</h1>
			<div class="lead">A sentence goes here:</div>
        	<div id="verb"/><br>
      	</div>
		<div>
			<div id="subject"/><br>
		</div>
		<div>
			<div id="article"/><br>
		</div>
		<div>
			<div id="adjective"/><br>
		</div>
		<div>
			<div id="noun"/>
		</div>

    	<div id="error" class="text-danger">
      	</div>

    </div>

	<!-- JavaScript for Dynamic Behavior: -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"
		th:src="@{/js/jquery-1.11.0.min.js}" ></script>

<script type="text/javascript">
	
	//	TODO: Alter this prefix when instructed.
	var prefix = "/services";

	// Perform AJAX requests...
	$.getJSON(prefix + "/sentence/sentence",   null, displaySentence)  .fail(displayErrorSentence);
<!--	$.getJSON(prefix + "/subject",   null, displaySubject)  .fail(displayErrorSubject);-->
<!--	$.getJSON(prefix + "/verb",      null, displayVerb)     .fail(displayErrorVerb);-->
<!--	$.getJSON(prefix + "/article",   null, displayArticle)  .fail(displayErrorArticle);-->
<!--	$.getJSON(prefix + "/adjective", null, displayAdjective).fail(displayErrorAdjective);-->
<!--	$.getJSON(prefix + "/noun",      null, displayNoun)     .fail(displayErrorNoun);-->
	
	//	Handle Success:

	function displaySubject(results) {
		$("#subject").html(results.word);
	}

	function displaySentence(results) {
		$("#subject").html(results.word);
	}
	
	function displayVerb(results) {
		alert(results.word);
		$("#verb").html(results.word);
	}
	
	function displayArticle(results) {
		$("#article").html(results.word);
	}
	
	function displayAdjective(results) {
		$("#adjective").html(results.word);
	}
	
	function displayNoun(results) {
		$("#noun").html(results.word);
	}
	
	//	Handle Errors:	
	
	function displayErrorSubject(x, s, m) {
		err(x, s, m, "subject");
	}

	function displayErrorSentence(x, s, m) {
		err(x, s, m, "sentence");
	}
	
	function displayErrorVerb(x, s, m) {
		err(x, s, m, "verb");
	}
	
	function displayErrorArticle(x, s, m) {
		err(x, s, m, "article");
	}
	
	function displayErrorAdjective(x, s, m) {
		err(x, s, m, "adjective");
	}
	
	function displayErrorNoun(x, s, m) {
		err(x, s, m, "noun");
	}
	
	// Dsiplay text of AJAX error message using a hidden div
	function err(xhr, status, msg, prefix) {
	 	// Display an error in the 'error' div above and show it.
		var text = xhr.responseText;
		var emsg = "<p><b>AJAX Failure retrieving " + prefix + ": " + xhr.status + " " + msg + "</b><br/></p>";
	
		$("#error").append(emsg);
		$("#error").show();
	}
</script>

</body>
</html>
